(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(15),u=n.n(c),o=n(1),s=n.n(o),i=n(3),l=n(4),p=n(5),m=n.n(p),f="https://glacial-cliffs-64027.herokuapp.com/api/persons",d={getData:function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get(f);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),createPerson:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post(f,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),deleteId:function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.delete("".concat(f,"/").concat(t));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),updateId:function(){var e=Object(i.a)(s.a.mark((function e(t,n){var r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,a=t.number,e.prev=1,e.next=4,m.a.put("".concat(f,"/").concat(n),{name:r,number:a,id:n});case 4:return c=e.sent,e.abrupt("return",c.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()},v=function(e){var t=e.value,n=e.handleChange;return a.a.createElement("div",{className:"Filter"},a.a.createElement("div",null,"filter shown with"),a.a.createElement("input",{defaultValue:t,onChange:n}))},h=function(e){var t=e.newName,n=e.handleNameChange,r=e.newNumber,c=e.handleNumberChange,u=e.handleClick;return a.a.createElement("div",{className:"PersonForm"},a.a.createElement("form",null,a.a.createElement("div",null,"name:"," ",a.a.createElement("input",{type:"text",value:t,onChange:n})),a.a.createElement("div",null,"number:"," ",a.a.createElement("input",{type:"text",value:r,onChange:c})),a.a.createElement("div",null,a.a.createElement("button",{onClick:u},"add"))))},b=function(e){var t=e.persons,n=e.handleDelete,r=t.map((function(e){return a.a.createElement("div",{key:e.id},e.name," ",e.number,a.a.createElement("button",{onClick:function(){return n(e)}},"delete"))}));return a.a.createElement("div",{className:"Persons"},r)},w=(n(39),function(e){var t=e.notification,n=t.message,r=t.type;return a.a.createElement("div",{className:"Notification ".concat(r)},n)}),E=d.getData,g=d.createPerson,k=d.deleteId,x=d.updateId,j=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),o=Object(l.a)(u,2),p=o[0],m=o[1],f=Object(r.useState)(""),d=Object(l.a)(f,2),j=d[0],O=d[1],y=Object(r.useState)(!0),C=Object(l.a)(y,2),N=C[0],D=C[1],I=Object(r.useState)(""),S=Object(l.a)(I,2),P=S[0],L=S[1],A=Object(r.useState)(),F=Object(l.a)(A,2),J=F[0],B=F[1];Object(r.useEffect)((function(){T()}),[]);var T=function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.t0=c,e.next=4,E();case 4:e.t1=e.sent,(0,e.t0)(e.t1),D(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.id,window.confirm("Delete ".concat(n,"?")),e.next=4,k(r);case 4:T();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.confirm("".concat(t.name," is already added to phonebook, replace the old number with a new one?")),e.next=3,x(t,n);case 3:(r=e.sent).error?(B({type:"error",message:r.error}),q()):(B({type:"success",message:"Updated ".concat(t.name)}),T(),q());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){setTimeout((function(){B(null)}),5e3)},z=function(){var e=Object(i.a)(s.a.mark((function e(t){var r,a,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r={name:p,number:j},!n.some((function(e){return e.name===p}))){e.next=16;break}return a=n.find((function(e){return e.name===p})).id,e.prev=4,e.next=7,V(r,a);case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(4),B({type:"error",message:"Information of ".concat(r.name," has already been removed from server")}),T(),q();case 14:e.next=26;break;case 16:return e.prev=16,e.next=19,g(r);case 19:(u=e.sent).error?(console.log(u.error),B({type:"error",message:u.error}),q()):(c(n.concat(u)),B({type:"success",message:"Added ".concat(r.name)}),q()),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),console.error(e.t1);case 26:case"end":return e.stop()}}),e,null,[[4,9],[16,23]])})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),J?a.a.createElement(w,{notification:J}):a.a.createElement("div",null),a.a.createElement(v,{value:P,handleChange:function(e){return L(e.target.value)}}),a.a.createElement("h3",null,"Add a new"),a.a.createElement(h,{newName:p,handleNameChange:function(e){return m(e.target.value)},newNumber:j,handleNumberChange:function(e){return O(e.target.value)},handleClick:z}),a.a.createElement("h3",null,"Numbers"),N?a.a.createElement("div",null,"Loading..."):a.a.createElement(b,{persons:function(e){return e.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}))}(n),handleDelete:U}))};u.a.render(a.a.createElement(j,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.1e089164.chunk.js.map