{"version":3,"sources":["services/persons.module.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["url","getData","a","axios","get","response","data","console","error","createPerson","newPerson","post","deleteId","id","delete","updateId","name","number","put","Filter","value","handleChange","className","defaultValue","onChange","PersonForm","newName","handleNameChange","newNumber","handleNumberChange","handleClick","type","onClick","Persons","persons","handleDelete","renderPersons","map","p","key","Notification","notification","message","personsService","App","useState","setPersons","setNewName","setNewNumber","isLoading","setIsLoading","nameFilter","setNameFilter","setNotification","useEffect","getPersons","deletePerson","window","confirm","updatePerson","clearNotification","setTimeout","e","preventDefault","some","find","concat","target","filter","toLowerCase","includes","filterPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a5b9705a.chunk.js","sourcesContent":["import axios from \"axios\";\nconst url = \"https://glacial-cliffs-64027.herokuapp.com/api/persons\";\n\nconst getData = async () => {\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nconst createPerson = async newPerson => {\n  try {\n    const response = await axios.post(url, newPerson);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nconst deleteId = async id => {\n  try {\n    await axios.delete(`${url}/${id}`);\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nconst updateId = async ({ name, number }, id) => {\n  return await axios.put(`${url}/${id}`, { name, number, id });\n};\n\nexport default { getData, createPerson, deleteId, updateId };\n","import React from \"react\";\n\nconst Filter = ({ value, handleChange }) => {\n  return (\n    <div className=\"Filter\">\n      <div>filter shown with</div>\n      <input defaultValue={value} onChange={handleChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  newName,\n  handleNameChange,\n  newNumber,\n  handleNumberChange,\n  handleClick\n}) => {\n  return (\n    <div className=\"PersonForm\">\n      <form>\n        <div>\n          name:{\" \"}\n          <input type=\"text\" value={newName} onChange={handleNameChange} />\n        </div>\n        <div>\n          number:{\" \"}\n          <input type=\"text\" value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button onClick={handleClick}>add</button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ persons, handleDelete }) => {\n  const renderPersons = persons.map(p => (\n    <div key={p.id}>\n      {p.name} {p.number}\n      <button onClick={() => handleDelete(p)}>delete</button>\n    </div>\n  ));\n  return <div className=\"Persons\">{renderPersons}</div>;\n};\n\nexport default Persons;\n","import React from \"react\";\nimport \"./Notification.css\";\n\nconst Notification = ({ notification }) => {\n  const { message, type } = notification;\n  return <div className={`Notification ${type}`}>{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport personsService from \"./services/persons.module\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\n\nconst { getData, createPerson, deleteId, updateId } = personsService;\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(true);\n  const [nameFilter, setNameFilter] = useState(\"\");\n  const [notification, setNotification] = useState();\n\n  const handleNameChange = e => setNewName(e.target.value);\n  const handleNumberChange = e => setNewNumber(e.target.value);\n  const handleFilterChange = e => setNameFilter(e.target.value);\n\n  useEffect(() => {\n    getPersons();\n  }, []);\n\n  const getPersons = async () => {\n    setIsLoading(true);\n    setPersons(await getData());\n    setIsLoading(false);\n  };\n\n  const deletePerson = async ({ name, id }) => {\n    window.confirm(`Delete ${name}?`);\n    await deleteId(id);\n    getPersons();\n  };\n\n  const updatePerson = async (newPerson, id) => {\n    window.confirm(\n      `${newPerson.name} is already added to phonebook, replace the old number with a new one?`\n    );\n    await updateId(newPerson, id);\n    setNotification({\n      type: \"success\",\n      message: `Updated ${newPerson.name}`\n    });\n    getPersons();\n    clearNotification();\n  };\n\n  const clearNotification = () => {\n    setTimeout(() => {\n      setNotification(null);\n    }, 5000);\n  };\n\n  const handleClick = async e => {\n    e.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    };\n\n    if (persons.some(p => p.name === newName)) {\n      let id = persons.find(p => p.name === newName).id;\n      try {\n        await updatePerson(newPerson, id);\n      } catch (error) {\n        setNotification({\n          type: \"error\",\n          message: `Information of ${newPerson.name} has already been removed from server`\n        });\n        getPersons();\n        clearNotification();\n      }\n    } else {\n      try {\n        setPersons(persons.concat(await createPerson(newPerson)));\n        setNotification({\n          type: \"success\",\n          message: `Added ${newPerson.name}`\n        });\n        clearNotification();\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  };\n\n  const filterPersons = persons => {\n    return persons.filter(p =>\n      p.name.toLowerCase().includes(nameFilter.toLowerCase())\n    );\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {notification ? (\n        <Notification notification={notification} />\n      ) : (\n        <div></div>\n      )}\n      <Filter value={nameFilter} handleChange={handleFilterChange} />\n\n      <h3>Add a new</h3>\n      <PersonForm\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n        handleClick={handleClick}\n      />\n      <h3>Numbers</h3>\n      {isLoading ? (\n        <div>Loading...</div>\n      ) : (\n        <Persons persons={filterPersons(persons)} handleDelete={deletePerson} />\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}